Trong project Django hiện tại, hãy tìm và liệt kê toàn bộ các API (view, endpoint URL) có liên quan đến việc download bài hát. Bao gồm:

Các API đang được dùng để tải bài hát từ server về (hoặc lưu bài hát xuống local).

Các API dùng để kiểm tra trạng thái tải xuống (VD: đã tải xong chưa, còn hạn dùng không…).

Bất kỳ API nào có thể được frontend gọi để tải file nhạc về trình duyệt hoặc lấy URL file nhạc đã tải.

Với mỗi API, vui lòng liệt kê:

Tên view hoặc class view (VD: DownloadSongView)

URL path tương ứng (VD: /api/download/<song_id>/)

Phương thức HTTP (GET/POST/...)

Các tham số (path, query params, request body nếu có)

Yêu cầu xác thực (VD: IsAuthenticated, token...)

Trả về dữ liệu gì (file, JSON, URL...)

Mục tiêu: để frontend team có thể hiểu rõ các API hiện có liên quan đến download và triển khai lại luồng tải nhạc phía client.

Các API Liên Quan Đến Việc Download Bài Hát
Dưới đây là danh sách đầy đủ các API liên quan đến việc tải xuống bài hát trong hệ thống:
1. SongDownloadView
Thông tin chung:
Tên view: SongDownloadView
URL path: /api/v1/music/songs/<int:song_id>/download/
Phương thức HTTP: GET
Yêu cầu xác thực: IsAuthenticated (cần đăng nhập)
Tham số:
Path parameter: song_id (ID của bài hát cần tải)
Trả về:
File âm thanh trực tiếp với header Content-Disposition: attachment
MIME type phù hợp với file âm thanh
Tên file giữ nguyên như trên server
Chức năng:
Cho phép người dùng tải trực tiếp file nhạc từ server về trình duyệt
Phù hợp với việc lưu file vào thiết bị
2. SongStreamView
Thông tin chung:
Tên view: SongStreamView
URL path: /api/v1/music/songs/<int:song_id>/stream/
Phương thức HTTP: GET
Yêu cầu xác thực: IsAuthenticated (cần đăng nhập)
Tham số:
Path parameter: song_id (ID của bài hát cần phát)
Header (tùy chọn): Range - cho phép yêu cầu một phần của file (hỗ trợ tính năng tua nhanh, tới một vị trí bất kỳ)
Trả về:
Streaming response với nội dung file âm thanh
Hỗ trợ phân đoạn (chunked) để phát trực tuyến
Headers phù hợp: Content-Length, Content-Range, Accept-Ranges
Chức năng:
Cung cấp phát trực tuyến với hỗ trợ Range requests
Phù hợp cho việc phát nhạc trong trình duyệt mà không cần tải xuống toàn bộ
3. URLs trong SongSerializer và SongDetailSerializer
Các trường URL trong JSON response:
audio_file: URL trực tiếp đến file nhạc gốc (đã được loại bỏ trong trường hợp production)
download_url: URL để tải bài hát (/api/v1/music/songs/<song_id>/download/)
stream_url: URL để phát trực tuyến bài hát (/api/v1/music/songs/<song_id>/stream/)
Các API trả về thông tin này:
GET /api/v1/music/songs/ (danh sách bài hát)
GET /api/v1/music/songs/<id>/ (chi tiết một bài hát)
Các API lấy danh sách bài hát như trending, recommended, search, v.v.
Chức năng:
Cung cấp cho frontend các URL để tải xuống hoặc phát trực tuyến bài hát
Frontend có thể sử dụng các URL này để tạo nút tải xuống hoặc phát nhạc

